{"version":3,"sources":["../src/response_handler.js"],"names":[],"mappings":";;;;;;;;;AAAO,O;;;AAEA,eAAS,eAAT,CAAyB,MAAzB,EAAiC,QAAjC,EAA2C;AAChD,YAAI,aAAa,EAAE,GAAF,CAAM,SAAS,IAAf,EAAqB,UAAC,IAAD,EAAU;AAC9C,iBAAO,EAAE,GAAF,CAAM,KAAK,MAAX,EAAmB,UAAC,MAAD,EAAY;AACpC,gBAAI,YAAY,KAAK,SAArB;AACA,gBAAI,aAAa,EAAE,GAAF,CAAM,OAAO,MAAb,EAAqB,UAAC,KAAD,EAAQ,KAAR,EAAkB;AACtD,qBAAO,CACL,OAAO,KAAP,CADK,EACU;AACf,qBAAO,UAAU,KAAV,GAAkB,UAAU,UAAV,GAAuB,KAAhD,CAAwD;AAFnD,eAAP;AAID,aALgB,CAAjB;;AAOA,gBAAI,gBAAgB,EAAE,GAAF,CAAM,OAAO,MAAb,EAAqB,UAAC,KAAD,EAAQ,GAAR,EAAgB;AACvD,qBAAO,KAAP;AACD,aAFmB,EAEjB,IAFiB,CAEZ,GAFY,CAApB;;AAIA,mBAAO;AACL,sBAAQ,gBAAgB,GAAhB,GAAsB,KAAK,IAD9B;AAEL,0BAAY;AAFP,aAAP;AAID,WAjBM,CAAP;AAkBD,SAnBgB,CAAjB;AAoBA,eAAO,EAAE,OAAF,CAAU,UAAV,EAAsB,IAAtB,CAAP;AACD","file":"response_handler.js","sourcesContent":["import _ from 'lodash';\n\nexport function handle_response(target, response) {\n  var timeseries = _.map(response.body, (body) => {\n    return _.map(body.series, (series) => {\n      var timerange = body.timerange;\n      var datapoints = _.map(series.values, (value, index) => {\n        return [\n          Number(value), // value\n          Number(timerange.start + timerange.resolution * index)  // timestamp\n        ];\n      });\n\n      var metric_prefix = _.map(series.tagset, (value, key) => {\n        return value;\n      }).join(' ');\n\n      return {\n        target: metric_prefix + ' ' + body.name,\n        datapoints: datapoints\n      };\n    });\n  });\n  return _.flatten(timeseries, true);\n}\n"]}